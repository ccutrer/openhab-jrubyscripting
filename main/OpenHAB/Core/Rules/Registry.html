<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenHAB::Core::Rules::Registry
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenHAB::Core::Rules::Registry";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../OpenHAB.html" title="OpenHAB (module)">OpenHAB</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Core.html" title="OpenHAB::Core (module)">Core</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Rules.html" title="OpenHAB::Core::Rules (module)">Rules</a></span></span>
     &raquo; 
    <span class="title">Registry</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenHAB::Core::Rules::Registry
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'>Object</span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'>Object</span></li>
          
            <li class="next">OpenHAB::Core::Rules::Registry</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../LazyArray.html" title="OpenHAB::Core::LazyArray (module)">LazyArray</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/openhab/core/rules/registry.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Provides access to all openHAB <span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">rules</a></span>, and acts like an array.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2 id="Instance Method Summary">
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(uid)  &#x21d2; Rule<sup>?</sup> </a>
    

    
      (also: #include?, #key?, #has_key?)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets a specific Rule.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build-instance_method" title="#build (instance method)">#<strong>build</strong>(preferred_provider = nil) { ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Enter the Rule Builder DSL.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove-instance_method" title="#remove (instance method)">#<strong>remove</strong>(rule_uid)  &#x21d2; Rule<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Remove a Rule.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">#<strong>to_a</strong>  &#x21d2; Array&lt;Rule&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Explicit conversion to array.</p>
</div></span>
  
</li>

      
    </ul>
  



  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../LazyArray.html" title="OpenHAB::Core::LazyArray (module)">LazyArray</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../LazyArray.html#each-instance_method" title="OpenHAB::Core::LazyArray#each (method)">#each</a></span>, <span class='object_link'><a href="../LazyArray.html#method_missing-instance_method" title="OpenHAB::Core::LazyArray#method_missing (method)">#method_missing</a></span>, <span class='object_link'><a href="../LazyArray.html#to_ary-instance_method" title="OpenHAB::Core::LazyArray#to_ary (method)">#to_ary</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../../Enumerable.html" title="Enumerable (module)">Enumerable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../../Enumerable.html#command-instance_method" title="Enumerable#command (method)">#command</a></span>, <span class='object_link'><a href="../../../Enumerable.html#decrease-instance_method" title="Enumerable#decrease (method)">#decrease</a></span>, <span class='object_link'><a href="../../../Enumerable.html#down-instance_method" title="Enumerable#down (method)">#down</a></span>, <span class='object_link'><a href="../../../Enumerable.html#equipments-instance_method" title="Enumerable#equipments (method)">#equipments</a></span>, <span class='object_link'><a href="../../../Enumerable.html#fast_forward-instance_method" title="Enumerable#fast_forward (method)">#fast_forward</a></span>, <span class='object_link'><a href="../../../Enumerable.html#increase-instance_method" title="Enumerable#increase (method)">#increase</a></span>, <span class='object_link'><a href="../../../Enumerable.html#locations-instance_method" title="Enumerable#locations (method)">#locations</a></span>, <span class='object_link'><a href="../../../Enumerable.html#member_of-instance_method" title="Enumerable#member_of (method)">#member_of</a></span>, <span class='object_link'><a href="../../../Enumerable.html#members-instance_method" title="Enumerable#members (method)">#members</a></span>, <span class='object_link'><a href="../../../Enumerable.html#move-instance_method" title="Enumerable#move (method)">#move</a></span>, <span class='object_link'><a href="../../../Enumerable.html#next-instance_method" title="Enumerable#next (method)">#next</a></span>, <span class='object_link'><a href="../../../Enumerable.html#not_member_of-instance_method" title="Enumerable#not_member_of (method)">#not_member_of</a></span>, <span class='object_link'><a href="../../../Enumerable.html#not_tagged-instance_method" title="Enumerable#not_tagged (method)">#not_tagged</a></span>, <span class='object_link'><a href="../../../Enumerable.html#off-instance_method" title="Enumerable#off (method)">#off</a></span>, <span class='object_link'><a href="../../../Enumerable.html#on-instance_method" title="Enumerable#on (method)">#on</a></span>, <span class='object_link'><a href="../../../Enumerable.html#pause-instance_method" title="Enumerable#pause (method)">#pause</a></span>, <span class='object_link'><a href="../../../Enumerable.html#play-instance_method" title="Enumerable#play (method)">#play</a></span>, <span class='object_link'><a href="../../../Enumerable.html#points-instance_method" title="Enumerable#points (method)">#points</a></span>, <span class='object_link'><a href="../../../Enumerable.html#previous-instance_method" title="Enumerable#previous (method)">#previous</a></span>, <span class='object_link'><a href="../../../Enumerable.html#refresh-instance_method" title="Enumerable#refresh (method)">#refresh</a></span>, <span class='object_link'><a href="../../../Enumerable.html#rewind-instance_method" title="Enumerable#rewind (method)">#rewind</a></span>, <span class='object_link'><a href="../../../Enumerable.html#stop-instance_method" title="Enumerable#stop (method)">#stop</a></span>, <span class='object_link'><a href="../../../Enumerable.html#tagged-instance_method" title="Enumerable#tagged (method)">#tagged</a></span>, <span class='object_link'><a href="../../../Enumerable.html#up-instance_method" title="Enumerable#up (method)">#up</a></span>, <span class='object_link'><a href="../../../Enumerable.html#update-instance_method" title="Enumerable#update (method)">#update</a></span></p>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice super">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
      in the class <span class='object_link'><a href="../LazyArray.html#method_missing-instance_method" title="OpenHAB::Core::LazyArray#method_missing (method)">OpenHAB::Core::LazyArray</a></span>
    
  </p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(uid)  &#x21d2; <tt><span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span></tt><sup>?</sup> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='include?-instance_method'>include?</span>, <span id='key?-instance_method'>key?</span>, <span id='has_key?-instance_method'>has_key?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Gets a specific Rule</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uid</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Rule UID</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/rules/registry.rb', line 21</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">[]</span>(uid)
  <span style="color:#d70">$rules</span>.get(uid)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build-instance_method">
  
    #<strong>build</strong>(preferred_provider = nil) { ... } &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Enter the Rule Builder DSL.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>preferred_provider</span>
      
      
        <span class='type'>(<tt><a href="https://www.openhab.org/javadoc/latest/org/openhab/core/common/registry/Provider.html" target="_parent" title="org.openhab.core.common.registry.Provider">org.openhab.core.common.registry.Provider</a></tt>, <tt>Proc</tt>, <tt>:persistent</tt>, <tt>:transient</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>An optional preferred provider to use. Can be one of several types:</p>
<ul>
<li>An explicit instance of <a href="https://www.openhab.org/javadoc/latest/org/openhab/core/common/registry/ManagedProvider.html" target="_parent" title="ManagedProvider">ManagedProvider</a></li>
<li>A Proc, which can calculate the preferred provider based on whatever conditions it wants,
and then is further processed as this parameter.</li>
<li><code>:persistent</code>, meaning the default <a href="https://www.openhab.org/javadoc/latest/org/openhab/core/common/registry/ManagedProvider.html" target="_parent" title="ManagedProvider">ManagedProvider</a>
for this registry. Managed providers persist their objects to JSON, and will survive after the
Ruby script is unloaded. This is where objects you configure with MainUI are stored. You should
use this provider when you're creating something in response to a one-time event.</li>
<li><code>:transient</code>, meaning a <a href="https://www.openhab.org/javadoc/latest/org/openhab/core/common/registry/ManagedProvider.html" target="_parent" title="ManagedProvider">ManagedProvider</a> that
will remove all of its contents when the Ruby script is unloaded. You should use this if you're
generating objects dynamically, either based on some sort of other configuration, or simply
hard coded and you're using Ruby as a more expressive way to define things than a <code>.items</code> or
<code>.things</code> file. If you <em>don't</em> use this provider for something such as metadata, then you
may have issues such as metadata still showing up even though you're no longer creating items
with it anymore.</li>
<li><code>nil</code>, meaning to fall back to the current thread setting. See <span class='object_link'><a href="../../DSL.html#provider-class_method" title="OpenHAB::DSL.provider (method)">DSL.provider</a></span>.
If there is no thread setting (or the thread setting was Proc that returned <code>nil</code>),
it defaults to <code>:transient</code>.</li>
</ul>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Block executed in the context of a <span class='object_link'><a href="../../DSL/Rules/Builder.html" title="OpenHAB::DSL::Rules::Builder (class)">DSL::Rules::Builder</a></span>.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The result of the block.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/rules/registry.rb', line 44</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">build</span>(preferred_provider = <span style="color:#069">nil</span>, &amp;block)
  <span style="color:#036;font-weight:bold">DSL</span>::<span style="color:#036;font-weight:bold">Rules</span>::<span style="color:#036;font-weight:bold">Builder</span>.new(preferred_provider).instance_eval_with_dummy_items(&amp;block)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remove-instance_method">
  
    #<strong>remove</strong>(rule_uid)  &#x21d2; <tt><span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Remove a Rule.</p>
<p>The rule must be a managed thing (typically created by Ruby or in the UI).</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>my_rule = rule <span style="color:#080;font-weight:bold">do</span>
  every <span style="color:#A60">:day</span>
  run { <span style="color:#069">nil</span> }
<span style="color:#080;font-weight:bold">end</span>

rules.remove(my_rule)</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rule_uid</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt><span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The removed rule, if found.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/rules/registry.rb', line 64</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">remove</span>(rule_uid)
  rule_uid = rule_uid.uid <span style="color:#080;font-weight:bold">if</span> rule_uid.is_a?(<span style="color:#036;font-weight:bold">Rule</span>)
  provider = <span style="color:#036;font-weight:bold">Provider</span>.registry.provider_for(rule_uid)
  <span style="color:#080;font-weight:bold">unless</span> provider.is_a?(org.openhab.core.common.registry.ManagedProvider)
    raise <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Cannot remove rule </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>rule_uid<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> from non-managed provider </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>provider.inspect<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  provider.remove(rule_uid)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_a-instance_method">
  
    #<strong>to_a</strong>  &#x21d2; <tt><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Explicit conversion to array</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="Rule.html" title="OpenHAB::Core::Rules::Rule (module)">Rule</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/rules/registry.rb', line 34</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">to_a</span>
  <span style="color:#d70">$rules</span>.all.to_a
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Dec  6 23:39:01 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.3).
</div>

    </div>
  </body>
</html>