<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: How Do I...?
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "how_do_i";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: How Do I...?</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'><h1>How Do I...?</h1>
<h2>Items</h2>
<h3>Get an Item</h3>
<p>Items and Groups are referred to by their name:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>
</code></pre>
<pre class="code ruby"><code class="ruby">gWindowBlinds
</code></pre>
<p>Items can be retrieved dynamically:</p>
<pre class="code ruby"><code class="ruby">the_item = items[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">My_Item</span><span style="color:#710">'</span></span>] <span style="color:#777"># This returns an item object, not just its state</span>
<span style="color:#777"># For all intents and purposes, the_item variable is the same as My_Item in the previous example</span>
</code></pre>
<h3>Get the Item's Name as a String</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.name
</code></pre>
<h3>Get the Item's Label</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.label
</code></pre>
<h3>Get a Related Item</h3>
<pre class="code ruby"><code class="ruby">my_light_item = items[<span style="color:#036;font-weight:bold">My_Switch</span>.name.sub(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">_Switch</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">_Light</span><span style="color:#710">'</span></span>)]
</code></pre>
<h3>Send a Command to an Item</h3>
<p>These three variants do the same thing:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.on
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.command <span style="color:#036;font-weight:bold">ON</span>
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span> &lt;&lt; <span style="color:#036;font-weight:bold">ON</span>
</code></pre>
<p>Note: all possible commands are supported on the corresponding item types, e.g. <code>on</code>, <code>off</code>, <code>up</code>, <code>down</code>, <code>play</code>, <code>pause</code>, <code>stop</code>, etc.
For more details, see the individual item type sub-sections under <span class='object_link'><a href="OpenHAB/Core/Items.html" title="OpenHAB::Core::Items (module)">OpenHAB::Core::Items</a></span></p>
<h3>Send a Command to an Item Only When Its State is Different</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.ensure.on
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.ensure.command <span style="color:#036;font-weight:bold">ON</span>
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.ensure &lt;&lt; <span style="color:#036;font-weight:bold">ON</span>
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#777"># ensure causes the command to return nil if the item is already in the same state</span>
logger.info(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Turning off the light</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">My_Item</span>.ensure.off
</code></pre>
<h3>Send a Timed Command</h3>
<p>A <span class='object_link'><a href="OpenHAB/DSL/Items/TimedCommand.html" title="OpenHAB::DSL::Items::TimedCommand (module)">Timed Command</a></span> is similar to the openHAB Item's
<a href="https://www.openhab.org/docs/configuration/items.html#parameter-expire">expire parameter</a>
but it offers more flexibility. It removes the need to manually create a timer.</p>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Switch</span>.on <span style="color:#606">for</span>: <span style="color:#00D">5</span>.minutes
</code></pre>
<h3>Send an Update to an Item</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Switch</span>.update <span style="color:#036;font-weight:bold">ON</span>
</code></pre>
<h3>Get State of an Item</h3>
<p>The Item's state is accessible through <code>Item.state</code>.</p>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">My_Item</span>.state == <span style="color:#036;font-weight:bold">ON</span>
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># This syntax is equivalent and preferred:</span>
<span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">My_Item</span>.on?
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">Indoor_Temperature</span>.state &gt; <span style="color:#00D">20</span> | <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">°C</span><span style="color:#710">'</span></span> || <span style="color:#036;font-weight:bold">Indoor_Temperature</span>.state &gt; <span style="color:#036;font-weight:bold">Outdoor_Temperature</span>.state
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>Note: all boolean helper methods are available depending on the item / state type.
For example <code>up?</code>, <code>down?</code>, <code>closed?</code>, <code>open?</code>, etc.</p>
<h3>Check if an Item's state is NULL of UNDEF</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">My_Item</span>.state?
  logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">My_Item is not NULL nor UNDEF</span><span style="color:#710">'</span></span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Compare Item's State</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">String_Item</span>.state == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">test string</span><span style="color:#710">'</span></span>
<span style="color:#036;font-weight:bold">Number_Item</span>.state &gt; <span style="color:#60E">5.3</span>
items[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Number_Item</span><span style="color:#710">'</span></span>].state == <span style="color:#00D">10</span>

<span style="color:#036;font-weight:bold">Temperature_Item</span>.state &gt; <span style="color:#00D">24</span> | <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">°C</span><span style="color:#710">'</span></span>
<span style="color:#036;font-weight:bold">Indoor_Temperature</span>.state &gt; <span style="color:#036;font-weight:bold">Outdoor_Temperature</span>.state 
<span style="color:#036;font-weight:bold">Indoor_Temperature</span>.state &gt; <span style="color:#036;font-weight:bold">Outdoor_Temperature</span>.state + <span style="color:#00D">5</span> | <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">°C</span><span style="color:#710">'</span></span>
<span style="color:#036;font-weight:bold">Indoor_Temperature</span>.state - <span style="color:#036;font-weight:bold">Outdoor_Temperature</span>.state &gt; <span style="color:#00D">5</span> | <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">°C</span><span style="color:#710">'</span></span>
</code></pre>
<h3>Get the Thing Linked to an Item</h3>
<pre class="code ruby"><code class="ruby">linked_thing = <span style="color:#036;font-weight:bold">My_Item</span>.thing
thing_uid = <span style="color:#036;font-weight:bold">My_Item</span>.thing.uid
</code></pre>
<h3>Get All Linked Things</h3>
<p>An item can be linked to multiple things.</p>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">My_Item</span>.things.each <span style="color:#080;font-weight:bold">do</span> |thing|
  logger.info(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Thing: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>thing.uid<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h2>Groups</h2>
<h3>Get the Members or All Members of a Group</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#777"># direct members</span>
gTest.members

<span style="color:#777"># direct members and all their descendents</span>
gTest.all_members
</code></pre>
<h3>Intersection of Two Groups</h3>
<p>Group members work like a <a href="https://ruby-doc.org/core-2.6/Array.html">Ruby array</a>
so you can use <code>&amp;</code> for intersection, <code>|</code> for union, and <code>-</code> for difference.</p>
<pre class="code ruby"><code class="ruby">curtains_in_family_room = gFamilyRoom.members &amp; gCurtains.members
</code></pre>
<h3>Iterate Over Members of a Group</h3>
<pre class="code ruby"><code class="ruby">gTest.members.each <span style="color:#080;font-weight:bold">do</span> |item|
  <span style="color:#777"># process item</span>
<span style="color:#080;font-weight:bold">end</span>

<span style="color:#777"># Iterate over all members, including members of members</span>
gTest.all_members.each <span style="color:#080;font-weight:bold">do</span> |item|
  <span style="color:#777"># process item</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Filter Members of a Group</h3>
<pre class="code ruby"><code class="ruby">members_that_are_on = gTest.members.select(&amp;<span style="color:#A60">:on?</span>)

<span style="color:#777"># exclude state</span>
members_that_are_not_on = gTest.members.reject(&amp;<span style="color:#A60">:on?</span>)

<span style="color:#777"># Filter with code:</span>
high_temperatures = gTemperatures.members.select(&amp;<span style="color:#A60">:state?</span>).select { |item| item.state &gt; <span style="color:#00D">30</span> | <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">°C</span><span style="color:#710">'</span></span> }
</code></pre>
<p>See <a href="https://ruby-doc.org/core-2.6/Array.html#class-Array-label-Accessing+Elements">Accessing elements in a Ruby array</a>.</p>
<h3>Get a sorted list of Group members matching a condition</h3>
<pre class="code ruby"><code class="ruby">sorted_items_by_battery_level = gBattery.members
                                        .select(&amp;<span style="color:#A60">:state?</span>) <span style="color:#777"># only include non NULL / UNDEF members</span>
                                        .select { |item| item.state &lt; <span style="color:#00D">20</span> } <span style="color:#777"># select only those with low battery</span>
                                        .sort_by(&amp;<span style="color:#A60">:state</span>) 
</code></pre>
<h3>Get a List of Values Mapped from the Members of a Group</h3>
<pre class="code ruby"><code class="ruby">battery_levels = gBattery.select(&amp;<span style="color:#A60">:state?</span>) <span style="color:#777"># only include non NULL / UNDEF members</span>
                         .sort_by(&amp;<span style="color:#A60">:state</span>)
                         .map { |item| <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item.label<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>item.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> } <span style="color:#777"># Use item state default formatting</span>
</code></pre>
<h3>Perform Arithmetic on Values from Members of a Group</h3>
<pre class="code ruby"><code class="ruby">weekly_rainfall = gRainWeeklyForecast.members.sum(&amp;<span style="color:#A60">:state</span>)
</code></pre>
<h2>Rules</h2>
<h3>Create a Rule</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my first rule</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command <span style="color:#036;font-weight:bold">My_Switch</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>
  run <span style="color:#080;font-weight:bold">do</span>
    <span style="color:#036;font-weight:bold">My_Light</span>.on
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>This applies to file-based rules. See <span class='object_link'><a href="OpenHAB/DSL/Rules/Builder.html" title="OpenHAB::DSL::Rules::Builder (class)">OpenHAB::DSL::Rules::Builder</a></span></p>
<h3>Create a Rule with One Line of Code</h3>
<pre class="code ruby"><code class="ruby">received_command(<span style="color:#036;font-weight:bold">My_Switch</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>) { <span style="color:#036;font-weight:bold">My_Light</span>.on }
</code></pre>
<p>This applies to file-based rules. See <span class='object_link'><a href="OpenHAB/DSL/Rules/Terse.html" title="OpenHAB::DSL::Rules::Terse (module)">Terse Rules</a></span></p>
<h3>Create a Rule in the Main UI</h3>
<p>See <a href="file.ui-rules.html">Creating Rules in the UI</a></p>
<h3>Get the Triggering Item</h3>
<pre class="code ruby"><code class="ruby">event.item
</code></pre>
<h3>Get the Triggering Item's Name</h3>
<pre class="code ruby"><code class="ruby">event.item.name
</code></pre>
<h3>Get the Triggering Item's Label</h3>
<pre class="code ruby"><code class="ruby">event.item.label
</code></pre>
<h3>Get the Triggering Item's State</h3>
<pre class="code ruby"><code class="ruby">event.state
</code></pre>
<p>or</p>
<pre class="code ruby"><code class="ruby">event.item.state
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#777"># Item can be compared against their state</span>
<span style="color:#080;font-weight:bold">if</span> event.item.state == <span style="color:#036;font-weight:bold">ON</span>
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>
<span style="color:#777"># or (preferable)</span>
<span style="color:#080;font-weight:bold">if</span> event.item.on?
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Get the Triggering Item's Previous State</h3>
<pre class="code ruby"><code class="ruby">event.was
</code></pre>
<p>Example:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> event.was.on?
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Compare Triggering Item's State Against Previous State</h3>
<pre class="code ruby"><code class="ruby">event.state &gt; event.was
</code></pre>
<h3>Get the Received Command</h3>
<pre class="code ruby"><code class="ruby">event.command
</code></pre>
<p>Example:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> event.command.on?
  <span style="color:#777"># do something</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Create a Member-of-Group Trigger</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Trigger by Member of</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  changed gGroupName.members
  run <span style="color:#080;font-weight:bold">do</span> |event|
    logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Triggered item: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.item.name<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Run a Rule on Start Up</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">initialize things</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  on_load <span style="color:#777"># This triggers whenever the script (re)loads</span>
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Here we go!</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Use Multiple Triggers</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">multiple triggers</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  changed <span style="color:#036;font-weight:bold">Switch1</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>
  changed <span style="color:#036;font-weight:bold">Switch2</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>
  run { |event| logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Switch: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.item.name<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> changed to: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>When the trigger conditions are the same, the triggers can be combined</p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">multiple triggers</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  changed <span style="color:#036;font-weight:bold">Switch1</span>, <span style="color:#036;font-weight:bold">Switch2</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>
  run { |event| logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Switch: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.item.name<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> changed to: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Use Multiple Conditions</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">multiple conditions</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  changed <span style="color:#036;font-weight:bold">Button_Action</span>, <span style="color:#606">to</span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">single</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">double</span><span style="color:#710">'</span></span>]
  run { |event| logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Action: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>event.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Create a Simple Cron Rule</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">run every day</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  every <span style="color:#A60">:day</span>, <span style="color:#606">at</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">2:35pm</span><span style="color:#710">'</span></span>
  run { <span style="color:#036;font-weight:bold">Amazon_Echo_TTS</span> &lt;&lt; <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">It's time to pick up the kids!</span><span style="color:#710">&quot;</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">run every 5 mins</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  every <span style="color:#00D">5</span>.minutes
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">openHAB is awesome</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Anniversary Reminder</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  every <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10-15</span><span style="color:#710">'</span></span> <span style="color:#777"># Trigger on 15th of October at midnight</span>
  run <span style="color:#080;font-weight:bold">do</span>
    things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mail:smtp:mymailthing</span><span style="color:#710">'</span></span>].send_mail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">me@example.com</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Anniversary Reminder!</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Today is your anniversary!</span><span style="color:#710">'</span></span>) 
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/Terse.html#every-instance_method" title="OpenHAB::DSL::Rules::Terse#every (method)">Every Trigger</a></span></p>
<h3>Create a Complex Cron Rule</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">cron rule</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  cron <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0 0,15 15-19 L * ?</span><span style="color:#710">'</span></span>
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Cron run</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>or an easier syntax:</p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">cron rule</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  cron <span style="color:#606">second</span>: <span style="color:#00D">0</span>, <span style="color:#606">minute</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">0,15</span><span style="color:#710">'</span></span>, <span style="color:#606">hour</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">15-19</span><span style="color:#710">'</span></span>, <span style="color:#606">dom</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">L</span><span style="color:#710">'</span></span>
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Cron run</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/Terse.html#cron-instance_method" title="OpenHAB::DSL::Rules::Terse#cron (method)">Cron Trigger</a></span></p>
<h3>Use Rule Guards</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">motion sensor</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  updated <span style="color:#036;font-weight:bold">Motion_Sensor</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span>
  only_if { <span style="color:#036;font-weight:bold">Sensor_Enable</span>.on? } <span style="color:#777"># Run rule only if Sensor_Enable item is ON</span>
  not_if { <span style="color:#036;font-weight:bold">Sun_Elevation</span>.positive? } <span style="color:#777"># and not while the sun is up</span>
  run { <span style="color:#036;font-weight:bold">LightItem</span>.on }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#only_if-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#only_if (method)">only_if</a></span>, <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#not_if-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#not_if (method)">not_if</a></span></p>
<h3>Restrict Rule Executions to Certain Time of Day</h3>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">doorbell</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  updated <span style="color:#036;font-weight:bold">DoorBell_Button</span>, <span style="color:#606">to</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">single</span><span style="color:#710">'</span></span>
  between <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">6am</span><span style="color:#710">'</span></span>..<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">8:30pm</span><span style="color:#710">'</span></span>
  run { play_sound <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">doorbell_chime.mp3</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Stop a Rule if the Triggering Item’s State is NULL or UNDEF</h3>
<p>Use <code>next</code> within a file-based rule, because it's in a block:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">next</span> <span style="color:#080;font-weight:bold">unless</span> event.item.state?
</code></pre>
<p>Use <code>return</code> within a UI rule:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">unless</span> event.item.state?
</code></pre>
<h3>Suppress Item State Flapping</h3>
<p>Only execute a rule when an item state changed and stayed the same for a period of time. This method
can only be done using a file-based rule.</p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Announce pool temperature</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  changed <span style="color:#036;font-weight:bold">Pool_Temperature</span>, <span style="color:#606">for</span>: <span style="color:#00D">10</span>.minutes <span style="color:#777"># Only when temp is stable for at least 10 minutes</span>
  only_if { <span style="color:#036;font-weight:bold">Pool_Heater</span>.on? } <span style="color:#777"># And only when the pool heater is running</span>
  run { say <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">The pool temperature is now </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#036;font-weight:bold">Pool_Temperature</span>.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Add a Pause / Sleep / Delay</h3>
<pre class="code ruby"><code class="ruby">sleep <span style="color:#60E">1.5</span> <span style="color:#777"># sleep for 1.5 seconds</span>
</code></pre>
<p>See Ruby docs on <a href="https://ruby-doc.org/core-2.6/Kernel.html#method-i-sleep">sleep</a></p>
<p><code>sleep</code> should be avoided if possible. A <span class='object_link'><a href="OpenHAB/DSL/Rules/BuilderDSL.html#delay-instance_method" title="OpenHAB::DSL::Rules::BuilderDSL#delay (method)">delay</a></span>
can be inserted in between two execution blocks to achieve the same result. This delay is implemented with a timer.
This is available only on file-based rules.</p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">delay something</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  on_load
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">This will run immediately</span><span style="color:#710">'</span></span> }
  delay <span style="color:#00D">10</span>.seconds
  run { logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">This will run 10 seconds after</span><span style="color:#710">'</span></span> }
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>Alternatively a timer can be used in
either a file-based rule or in a UI based rule using <span class='object_link'><a href="OpenHAB/DSL.html#after-class_method" title="OpenHAB::DSL.after (method)">after</a></span></p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">delay something</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  on_load
  run <span style="color:#080;font-weight:bold">do</span>
    logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">This will run immediately</span><span style="color:#710">'</span></span> 
    after(<span style="color:#00D">10</span>.seconds) <span style="color:#080;font-weight:bold">do</span>
      logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">This will run 10 seconds after</span><span style="color:#710">'</span></span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h2>Things</h2>
<h3>Get Thing Status</h3>
<pre class="code ruby"><code class="ruby">things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">lgwebos:WebOSTV:main-tv</span><span style="color:#710">'</span></span>].status
</code></pre>
<h3>Check if Thing is Online</h3>
<pre class="code ruby"><code class="ruby">things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">lgwebos:WebOSTV:main-tv</span><span style="color:#710">'</span></span>].online?
</code></pre>
<p>or</p>
<pre class="code ruby"><code class="ruby">things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">lgwebos:WebOSTV:main-tv</span><span style="color:#710">'</span></span>].status == <span style="color:#036;font-weight:bold">ThingStatus</span>::<span style="color:#036;font-weight:bold">ONLINE</span>
</code></pre>
<h3>Enable/Disable a Thing</h3>
<pre class="code ruby"><code class="ruby">thing = things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">lgwebos:WebOSTV:main-tv</span><span style="color:#710">'</span></span>]

thing.disable
logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TV enabled: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>thing.enabled?<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>

thing.enable
logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">TV enabled: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>thing.enabled?<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
</code></pre>
<h2>Timers</h2>
<h3>Create a Timer</h3>
<pre class="code ruby"><code class="ruby">after <span style="color:#00D">3</span>.minutes <span style="color:#080;font-weight:bold">do</span>
  <span style="color:#036;font-weight:bold">My_Light</span>.on
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/DSL.html#after-class_method" title="OpenHAB::DSL.after (method)">after</a></span>, <a href="../usage/misc/time.md#Durations">duration</a></p>
<h3>Reschedule a Timer</h3>
<p>A timer can be rescheduled inside the timer body</p>
<pre class="code ruby"><code class="ruby">after <span style="color:#00D">3</span>.minutes <span style="color:#080;font-weight:bold">do</span> |timer|
  <span style="color:#036;font-weight:bold">My_Light</span>.on
  timer.reschedule <span style="color:#777"># This will reschedule it for the same initial duration, i.e. 3 minutes in this case</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>Or it can be rescheduled from outside the timer</p>
<pre class="code ruby"><code class="ruby">my_timer = after <span style="color:#00D">3</span>.minutes <span style="color:#080;font-weight:bold">do</span>
  <span style="color:#036;font-weight:bold">My_Light</span>.on
<span style="color:#080;font-weight:bold">end</span>

my_timer.reschedule <span style="color:#777"># Use the same initial duration</span>
</code></pre>
<p>It can be rescheduled to a different duration</p>
<pre class="code ruby"><code class="ruby">after <span style="color:#00D">3</span>.minutes <span style="color:#080;font-weight:bold">do</span> |timer|
  <span style="color:#036;font-weight:bold">My_Light</span>.on
  timer.reschedule <span style="color:#00D">1</span>.minute
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h3>Manage Multiple Timers</h3>
<p>Multiple timers can be managed in the traditional way by storing the timer objects in a Hash:</p>
<pre class="code ruby"><code class="ruby"><span style="color:#33B">@timers</span> = {}

rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">a timer for each group member</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command gOutdoorLights.members <span style="color:#080;font-weight:bold">do</span>
  run <span style="color:#080;font-weight:bold">do</span> |event|
    <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@timers</span>[event.item]
      <span style="color:#33B">@timers</span>[event.item].reschedule 
    <span style="color:#080;font-weight:bold">else</span>
      <span style="color:#33B">@timers</span>[event.item] = after <span style="color:#00D">3</span>.minutes <span style="color:#080;font-weight:bold">do</span> <span style="color:#777"># Use the triggering item as the timer ID</span>
        event.item.off
        <span style="color:#33B">@timers</span>.delete(event.item)
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>However, a built in mechanism is available to help manage multiple timers, and is done in a thread-safe manner.
This is done using timer IDs.
The following rule automatically finds and reschedules the timer matching the same ID, which corresponds to each group member.</p>
<pre class="code ruby"><code class="ruby">rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">a timer for each group member</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command gOutdoorLights.members <span style="color:#080;font-weight:bold">do</span>
  run <span style="color:#080;font-weight:bold">do</span> |event|
    after <span style="color:#00D">3</span>.minutes, <span style="color:#606">id</span>: event.item <span style="color:#080;font-weight:bold">do</span> <span style="color:#777"># Use the triggering item as the timer ID</span>
      event.item.off
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>Furthermore, you can manipulate the managed timers using the built-in <span class='object_link'><a href="OpenHAB/DSL/TimerManager.html" title="OpenHAB::DSL::TimerManager (class)">timers</a></span> object.</p>
<pre class="code ruby"><code class="ruby"><span style="color:#777"># timers is a special object to access the timers created with an id</span>
rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">cancel all timers</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command <span style="color:#036;font-weight:bold">Cancel_All_Timers</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span> <span style="color:#777"># Send a command to this item to cancel all timers</span>
  run <span style="color:#080;font-weight:bold">do</span>
    gOutdoorLights.members.each <span style="color:#080;font-weight:bold">do</span> |item_as_timer_id|
      timers.cancel(item_as_timer_id)
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">reschedule all timers</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command <span style="color:#036;font-weight:bold">Reschedule_All_Timers</span>, <span style="color:#606">to</span>: <span style="color:#036;font-weight:bold">ON</span> <span style="color:#777"># Send a command to this item to restart all timers</span>
  run <span style="color:#080;font-weight:bold">do</span>
    gOutdoorLights.members.each <span style="color:#080;font-weight:bold">do</span> |item_as_timer_id|
      timers.reschedule(item_as_timer_id)
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<h2>Use Metadata</h2>
<pre class="code ruby"><code class="ruby">metadata = <span style="color:#036;font-weight:bold">My_Item</span>.metadata[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">namespace</span><span style="color:#710">'</span></span>].value
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/Core/Items/Item.html#metadata-instance_method" title="OpenHAB::Core::Items::Item#metadata (method)">OpenHAB::Core::Items::Item#metadata</a></span></p>
<h2>Use Persistence</h2>
<pre class="code ruby"><code class="ruby">daily_max = <span style="color:#036;font-weight:bold">My_Item</span>.maximum_since(<span style="color:#00D">24</span>.hours.ago)
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/Core/Items/Persistence.html" title="OpenHAB::Core::Items::Persistence (module)">OpenHAB::Core::Items::Persistence</a></span></p>
<h2>Use Semantic Model</h2>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">LivingRoom_Motion</span>.location                            <span style="color:#777"># Location of the motion sensor</span>
                 .equipments(<span style="color:#036;font-weight:bold">Semantics</span>::<span style="color:#036;font-weight:bold">Lightbulb</span>)    <span style="color:#777"># Get all Lightbulb Equipments in the location</span>
                 .members                             <span style="color:#777"># Get all the member items of the equipments</span>
                 .points(<span style="color:#036;font-weight:bold">Semantics</span>::<span style="color:#036;font-weight:bold">Switch</span>)           <span style="color:#777"># Select only items that are Switch Points</span>
                 .on                                  <span style="color:#777"># Send an ON command to the items</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/Core/Items/Semantics.html" title="OpenHAB::Core::Items::Semantics (module)">Semantics</a></span></p>
<h2>Use Logging</h2>
<pre class="code ruby"><code class="ruby">logger.info(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">My Item's state is: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#036;font-weight:bold">My_Item</span>.state<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>)
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/Log.html" title="OpenHAB::Log (module)">Logging</a></span></p>
<h2>Use Actions</h2>
<p>See <a href="file.actions.html">Actions</a></p>
<h3>Publish an MQTT Message</h3>
<pre class="code ruby"><code class="ruby">things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mqtt:broker:mybroker</span><span style="color:#710">'</span></span>].publish_mqtt(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">topic/name</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">payload</span><span style="color:#710">'</span></span>)
</code></pre>
<h3>Send an Email</h3>
<pre class="code ruby"><code class="ruby">things[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mail:smtp:mymailthing</span><span style="color:#710">'</span></span>].send_mail(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">me@example.com</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Subject</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">message body</span><span style="color:#710">'</span></span>)
</code></pre>
<h3>Play Sound Through the Default Audio Sink</h3>
<pre class="code ruby"><code class="ruby">play_sound <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">sound_file.mp3</span><span style="color:#710">'</span></span>
</code></pre>
<h3>Execute a Command</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">Exec</span>.executeCommandLine(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">/path/to/program</span><span style="color:#710">'</span></span>)
</code></pre>
<h2>Date/Time</h2>
<h3>Use ZonedDateTime</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">ZonedDateTime</span>.now + <span style="color:#00D">30</span>.minutes
<span style="color:#777"># or</span>
<span style="color:#00D">30</span>.minutes.from_now <span style="color:#777"># Return a ZonedDateTime</span>
</code></pre>
<h3>Convert ZonedDateTime to Ruby Time</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">ZonedDateTime</span>.now.to_time
</code></pre>
<h3>Convert Ruby Time to ZonedDateTime</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#036;font-weight:bold">Time</span>.now.to_zoned_date_time
</code></pre>
<h3>Work with LocalTime</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">Time</span>.now &gt; <span style="color:#036;font-weight:bold">LocalTime</span>.parse(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">7am</span><span style="color:#710">'</span></span>)
  logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Wake up!</span><span style="color:#710">'</span></span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<pre class="code ruby"><code class="ruby"><span style="color:#777"># The range can cross midnight</span>
<span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">Time</span>.now.between?(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">10pm</span><span style="color:#710">'</span></span>..<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">5am</span><span style="color:#710">'</span></span>)
  logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">Sleep time</span><span style="color:#710">'</span></span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/CoreExt/Java/LocalTime.html" title="OpenHAB::CoreExt::Java::LocalTime (class)">LocalTime</a></span></p>
<h3>Work with MonthDay</h3>
<pre class="code ruby"><code class="ruby"><span style="color:#080;font-weight:bold">if</span> <span style="color:#036;font-weight:bold">MonthDay</span>.now == <span style="color:#036;font-weight:bold">MonthDay</span>.parse(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">02-14</span><span style="color:#710">'</span></span>)
  logger.info <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Happy Valentine's Day!</span><span style="color:#710">&quot;</span></span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <span class='object_link'><a href="OpenHAB/CoreExt/Java/MonthDay.html" title="OpenHAB::CoreExt::Java::MonthDay (class)">MonthDay</a></span></p>
<p>For more examples, see <a href="../usage/misc/time.md">Working With Time</a></p>
<h2>Ruby</h2>
<h3>Install Additional Gems</h3>
<pre class="code ruby"><code class="ruby">gemfile <span style="color:#080;font-weight:bold">do</span>
  source <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">https://rubygems.org</span><span style="color:#710">'</span></span>
  gem <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">httparty</span><span style="color:#710">'</span></span>
<span style="color:#080;font-weight:bold">end</span>
</code></pre>
<p>See <a href="file.gems.html">Inline Bundler</a></p>
<h3>Use Shared Library</h3>
<p>See <a href="../usage/misc/shared_code.md">Shared Code</a></p>
<h2>Miscellaneous</h2>
<h3>Get the UID of a Rule</h3>
<p>This applies to file-based rules:</p>
<pre class="code ruby"><code class="ruby">rule_obj = rule <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my rule name</span><span style="color:#710">'</span></span> <span style="color:#080;font-weight:bold">do</span>
  received_command <span style="color:#036;font-weight:bold">My_Item</span>
  run <span style="color:#080;font-weight:bold">do</span>
    <span style="color:#777"># rule code here</span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span>

rule_uid = rule_obj.uid
</code></pre>
<h3>Get the UID of a Rule by Name</h3>
<pre class="code ruby"><code class="ruby">rule_uid = rules.find { |rule| rule.name == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">This is the name of my rule</span><span style="color:#710">'</span></span> }.uid
</code></pre>
<h3>Enable or Disable a Rule by UID</h3>
<pre class="code ruby"><code class="ruby">rules[rule_uid].enable
rules[rule_uid].disable
</code></pre>
<h3>Run a rule by UID</h3>
<pre class="code ruby"><code class="ruby">rules[rule_uid].trigger
</code></pre>
<h3>Use a Java Class</h3>
<pre class="code ruby"><code class="ruby">java_import java.time.format.DateTimeFormatter

formatter = <span style="color:#036;font-weight:bold">DateTimeFormatter</span>.of_pattern(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yyyy MM dd</span><span style="color:#710">'</span></span>)
</code></pre>
<pre class="code ruby"><code class="ruby">formatter = <span style="color:#036;font-weight:bold">Java</span>::<span style="color:#036;font-weight:bold">JavaTimeFormat</span>::<span style="color:#036;font-weight:bold">DateTimeFormatter</span>.of_pattern(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yyyy MM dd</span><span style="color:#710">'</span></span>)
</code></pre>
<p>See: <a href="https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby">Calling Java from JRuby</a></p>
</div></div>

      <div id="footer">
  Generated on Tue Dec  6 23:29:28 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.3).
</div>

    </div>
  </body>
</html>