<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: OpenHAB::Core::ValueCache
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenHAB::Core::ValueCache";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (V)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OpenHAB.html" title="OpenHAB (module)">OpenHAB</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Core.html" title="OpenHAB::Core (module)">Core</a></span></span>
     &raquo; 
    <span class="title">ValueCache</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: OpenHAB::Core::ValueCache
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/openhab/core/value_cache.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Only the <span class='object_link'><a href="../DSL.html#shared_cache-class_method" title="OpenHAB::DSL.shared_cache (method)">sharedCache</a></span> is exposed in Ruby.
For a private cache, simply use an instance variable. See
<a href="../../file.ruby-basics.html#Variables" title="Instance Variables">Instance Variables</a>.</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Because every script or UI rule gets it own JRuby engine instance,
you cannot rely on being able to access Ruby objects between them. Only
objects that implement a Java interface that's part of Java or openHAB
Core (such as Hash implements <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" target="_parent" title="java.util.Map">java.util.Map</a>, or other basic
datatypes) can be reliably stored and accessed from the shared cache.
Likewise, you can use the cache to access data from other scripting
languages, but they'll be all but useless in Ruby. It's best to stick
to simple data types. If you're having troubles, serializing to_json
before storing may help.</p>
</div>
  </div>

<p>ValueCache is the interface used to access a
<span class='object_link'><a href="../DSL.html#shared_cache-class_method" title="OpenHAB::DSL.shared_cache (method)">shared cache</a></span> available between scripts and/or
rule executions.</p>
<p>While ValueCache looks somewhat like a Hash, it does not support
iteration of the contained elements. So it's limited to strictly storing,
fetching, or removing known elements.</p>
<p>Shared caches are <em>not</em> persisted between openHAB restarts. And in fact,
if all scripts are unloaded that reference a particular key, that key is
removed.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>shared_cache.compute_if_absent(<span style="color:#A60">:execution_count</span>) { <span style="color:#00D">0</span> }
shared_cache[<span style="color:#A60">:execution_count</span>] += <span style="color:#00D">1</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://www.openhab.org/docs/configuration/jsr223.html#cache-preset" target="_parent" title="openHAB Cache Preset">openHAB Cache Preset</a></li>
    
  </ul>

</div>






  
    <h2 id="Instance Method Summary">
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; Object </a>
    

    
      (also: #store)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]=-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assoc-instance_method" title="#assoc (instance method)">#<strong>assoc</strong>(key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compute_if_absent-instance_method" title="#compute_if_absent (instance method)">#<strong>compute_if_absent</strong>(key, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Compute and store new value for key if the key is absent.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(key)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dig-instance_method" title="#dig (instance method)">#<strong>dig</strong>(key, *identifiers)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>(key, *default_value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_values-instance_method" title="#fetch_values (instance method)">#<strong>fetch_values</strong>(*keys, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key%3F-instance_method" title="#key? (instance method)">#<strong>key?</strong>(key)  &#x21d2; Boolean </a>
    

    
      (also: #has_key?, #include?, #member?)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#merge!-instance_method" title="#merge! (instance method)">#<strong>merge!</strong>(*other_hashes)  &#x21d2; Object </a>
    

    
      (also: #update)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#slice-instance_method" title="#slice (instance method)">#<strong>slice</strong>(*keys)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_proc-instance_method" title="#to_proc (instance method)">#<strong>to_proc</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#values_at-instance_method" title="#values_at (instance method)">#<strong>values_at</strong>(*keys)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  




  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(key)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='store-instance_method'>store</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-5B-5D" target="_parent" title="Hash#[]">Hash#[]</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 49</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">[]</span>(key)
  get(key.to_s)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="[]=-instance_method">
  
    #<strong>[]=</strong>(key, value)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-5B-5D-3D" target="_parent" title="Hash#[]=">Hash#[]=</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 65</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">[]=</span>(key, value)
  put(key.to_s, value)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assoc-instance_method">
  
    #<strong>assoc</strong>(key)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-assoc" target="_parent" title="Hash#assoc">Hash#assoc</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 109</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">assoc</span>(key)
  [key, fetch(key) <span style="color:#080;font-weight:bold">do</span>
    <span style="color:#777"># return nil directly, without storing a value to the cache</span>
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">end</span>]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="compute_if_absent-instance_method">
  
    #<strong>compute_if_absent</strong>(key, &amp;block)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Compute and store new value for key if the key is absent. This method is atomic.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>new value</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'>Object</span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>new value or current value</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 60</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">compute_if_absent</span>(key, &amp;block)
  get(key.to_s, &amp;block)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>(key)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-delete" target="_parent" title="Hash#delete">Hash#delete</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 71</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">delete</span>(key)
  key = key.to_s
  <span style="color:#080;font-weight:bold">if</span> block_given?
    fetch(key) <span style="color:#080;font-weight:bold">do</span>
      <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">yield</span>(key)
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
  remove(key)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dig-instance_method">
  
    #<strong>dig</strong>(key, *identifiers)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-dig" target="_parent" title="Hash#dig">Hash#dig</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 117</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">dig</span>(key, *identifiers)
  r = fetch(key) { <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">nil</span> }
  r&amp;.dig(*identifiers)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch-instance_method">
  
    #<strong>fetch</strong>(key, *default_value)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>shared_cache.fetch(<span style="color:#A60">:key_from_another_script</span>) <span style="color:#777"># raises NoKeyError</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-fetch" target="_parent" title="Hash#fetch">Hash#fetch</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 86</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fetch</span>(key, *default_value)
  <span style="color:#080;font-weight:bold">if</span> default_value.length &gt; <span style="color:#00D">1</span>
    raise <span style="color:#036;font-weight:bold">ArgumentError</span>,
          <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">wrong number of arguments (given </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>default_value.length + <span style="color:#00D">1</span><span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">, expected 0..1)</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>

  key = key.to_s
  <span style="color:#080;font-weight:bold">if</span> default_value.empty?
    <span style="color:#080;font-weight:bold">if</span> block_given?
      get(key) <span style="color:#080;font-weight:bold">do</span>
        <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">yield</span>(key)
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">else</span>
      get(key) <span style="color:#080;font-weight:bold">do</span>
        raise <span style="color:#036;font-weight:bold">KeyError</span>.new(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">key not found: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>key.inspect<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>, <span style="color:#606">key</span>: key)
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">else</span>
    get(key) { <span style="color:#080;font-weight:bold">return</span> default_value.first }
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_values-instance_method">
  
    #<strong>fetch_values</strong>(*keys, &amp;block)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-fetch_values" target="_parent" title="Hash#fetch_values">Hash#fetch_values</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 123</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">fetch_values</span>(*keys, &amp;block)
  result = []
  keys.each <span style="color:#080;font-weight:bold">do</span> |key|
    <span style="color:#080;font-weight:bold">if</span> block
      result &lt;&lt; fetch(key, &amp;block)
    <span style="color:#080;font-weight:bold">else</span>
      has_value = <span style="color:#069">true</span>
      value = fetch(key) { has_value = <span style="color:#069">false</span> }
      result &lt;&lt; value <span style="color:#080;font-weight:bold">if</span> has_value
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
  result
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="key?-instance_method">
  
    #<strong>key?</strong>(key)  &#x21d2; <tt>Boolean</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='has_key?-instance_method'>has_key?</span>, <span id='include?-instance_method'>include?</span>, <span id='member?-instance_method'>member?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-key-3F" target="_parent" title="Hash#key?">Hash#key?</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 138</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">key?</span>(key)
  !!fetch(key) { <span style="color:#080;font-weight:bold">return</span> <span style="color:#069">false</span> }
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="merge!-instance_method">
  
    #<strong>merge!</strong>(*other_hashes)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='update-instance_method'>update</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-merge-21" target="_parent" title="Hash#merge!">Hash#merge!</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 146</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">merge!</span>(*other_hashes)
  other_hashes.each <span style="color:#080;font-weight:bold">do</span> |hash|
    hash.each <span style="color:#080;font-weight:bold">do</span> |(k, v)|
      k = k.to_s
      <span style="color:#080;font-weight:bold">if</span> block_given?
        dup = <span style="color:#069">true</span>
        old_value = fetch(k) <span style="color:#080;font-weight:bold">do</span>
          dup = <span style="color:#069">false</span>
        <span style="color:#080;font-weight:bold">end</span>
        <span style="color:#069">self</span>[k] = dup ? <span style="color:#080;font-weight:bold">yield</span>(k, old_value, v) : v
      <span style="color:#080;font-weight:bold">else</span>
        <span style="color:#069">self</span>[k] = v
      <span style="color:#080;font-weight:bold">end</span>
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#069">self</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="slice-instance_method">
  
    #<strong>slice</strong>(*keys)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-slice" target="_parent" title="Hash#slice">Hash#slice</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 166</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">slice</span>(*keys)
  result = {}
  keys.each <span style="color:#080;font-weight:bold">do</span> |k|
    k = k.to_s
    result[k] = <span style="color:#069">self</span>[k] <span style="color:#080;font-weight:bold">if</span> key?(k)
  <span style="color:#080;font-weight:bold">end</span>
  result
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_proc-instance_method">
  
    #<strong>to_proc</strong>  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-to_proc" target="_parent" title="Hash#to_proc">Hash#to_proc</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 176</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">to_proc</span>
  <span style="color:#33B">@to_proc</span> ||= -&gt;(k) { <span style="color:#069">self</span>[k] }
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="values_at-instance_method">
  
    #<strong>values_at</strong>(*keys)  &#x21d2; <tt><span class='object_link'>Object</span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://ruby-doc.org/core-3.1.2/Hash.html#method-i-values_at" target="_parent" title="Hash#values_at">Hash#values_at</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/openhab/core/value_cache.rb', line 181</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">values_at</span>(*keys)
  keys.map <span style="color:#080;font-weight:bold">do</span> |k|
    <span style="color:#069">self</span>[k]
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Dec  6 23:38:58 2022 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.1.3).
</div>

    </div>
  </body>
</html>